stages:
  - build
  - archive
  
build_project:
  stage: build
  script:
    - xcodebuild clean -workspace examples/CheckoutiOSDemoApp/CheckoutiOSDemoApp.xcodeproj/project.xcworkspace -disableAutomaticPackageResolution -scheme SchemeName | xcpretty 
    - xcodebuild test -workspace examples/CheckoutiOSDemoApp/CheckoutiOSDemoApp.xcodeproj/project.xcworkspace -scheme SchemeName -destination 'platform=iOS Simulator,name=iPhone 12 Pro,OS=15.2' | xcpretty -s
  # tags:
  #  - ios-tag
  #  - version-1.0
archive_build:
  dependencies: []
  stage: archive
  artifacts:
    paths:
      - build/CheckoutDemo.ipa
  script:
    - fastlane beta
  # tags:
  #   - ios-tag
  #   - version-1.0
  only:
    - ci-config